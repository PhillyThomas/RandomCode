<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset='UTF-8'>
	<meta http-equiv='X-UA-Compatible' content='IE=edge'>
	<meta name='viewport' content='width=device-width, initial-scale=1.0'>
	<link rel='shortcut icon' href='#'>
	<script src='https://code.jquery.com/jquery-3.6.0.min.js' integrity='sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=' crossorigin='anonymous'></script>
	<title>Hubspot Bulk Property Import tool</title>
	<style>
		@import url('http://fonts.cdnfonts.com/css/avenir-next-lt-pro');
		body{ margin:0; }
		.topbar{ position:relative; top:0%; right:0%; width:100%; height:3.3rem; background-color:#2e3f50; }
		.title{ font-family: 'Avenir Next LT Pro', sans-serif; font-weight:600; line-height: normal; -webkit-font-smoothing: antialiased; font-size:25px; color: #33475b; text-transform:none; }
		.content{ display: flex; flex-direction:column; justify-content: center; margin: 0 1rem 0 1rem; gap:.5rem;}
		.creationForm{ display:flex; justify-content:space-evenly; width:96%; border:1px solid #d2d4d4; background:#f5f8fa; flex-wrap:wrap; gap:1rem; padding:.5rem;}
		input, select{ width:10rem;}
		.buttons { display:flex; justify-content:center; margin:1rem; gap:1rem; }
		.overlay { display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:99; position:fixed; height:100%; width:100%; background:rgba(0,0,0,0.3); backdrop-filter:blur(3px); }
		.overlay textarea{
			width:90%;
			height:50%;
			resize:none;
		}
	</style>
</head>

<body>

	<div class="overlay" id="overlay">
		<button id="closeOverlay">Close</button>
		<textarea id="overlayTextArea">TestTesttest</textarea>
	</div>

	<div class="topbar" style="display:flex; align-items:center;">
		<svg style="fill:#ff7a59; height:76%;" id="hs-nav-v4--logo" viewBox="0 0 242.04 257" alt="Home" class="nav-logo logo"> <g class="cls-2"> <path class="cls-3" d="M162.79,101.25V82a14.84,14.84,0,0,0,8.56-13.38v-.45a14.87,14.87,0,0,0-14.83-14.83h-.45a14.87,14.87,0,0,0-14.83,14.83v.45A14.84,14.84,0,0,0,149.8,82v19.29a42.06,42.06,0,0,0-20,8.8L76.86,68.86a16.89,16.89,0,1,0-7.91,10.29L121,119.67a42.18,42.18,0,0,0,.65,47.56l-15.84,15.84a13.6,13.6,0,0,0-3.93-.64,13.75,13.75,0,1,0,13.75,13.75,13.56,13.56,0,0,0-.64-3.93l15.67-15.67a42.25,42.25,0,1,0,32.1-75.33m-6.49,63.42A21.68,21.68,0,1,1,178,143a21.68,21.68,0,0,1-21.68,21.68"></path> </g> </svg>
	</div>

	<div class="content" id="mainCanvas">
		<span class="title">Hubspot Bulk Property creation tool</span>
		<div class="creationForm" id="CF1">
			<input type="text" placeholder="Name" id="name1"></input>
			<input type="text" placeholder="label" id="label1"></input>
			<select name="type" id="type1" "><option value="" selected="selected">Type</option><option value="number">number</option><option value="date">date</option><option value="datetime">datetime</option><option value="enumeration">enumeration</option></select>
			<select name="fieldType" id="fieldType1" >
				<option value="" selected="selected">Field Type</option>
				<option value="textarea">textarea</option>
				<option value="text">text</option>
				<option value="date">date</option>
				<option value="file">file</option>
				<option value="number">number</option>
				<option value="select">select</option>
				<option value="radio">radio</option>
				<option value="checkbox">checkbox</option>
				<option value="booleancheckbox">booleancheckbox</option>
			</select>
			<input type="text" placeholder="groupName" id="groupName1"></input>
			<input type="text" placeholder="description" id="description1"></input>
			<input type="text" placeholder="options" id="options1"></input>
			<select name="hasUniqueValue" id="hasUniqueValue1" >
				<option value="" selected="selected">hasUniqueValue</option>
				<option value="Yes">Yes</option>
				<option value="No">No</option>
			</select>
			<select name="hidden" id="hidden1" >
				<option value="" selected="selected">hidden</option>
				<option value="Yes">Yes</option>
				<option value="No">No</option>
			</select>
			<select name="formField" id="formField1" >
				<option value="" selected="selected">Form Field</option>
				<option value="Yes">Yes</option>
				<option value="No">No</option>
			</select>
		</div>
	</div>

	<div class="buttons">
		<button id="createCode">Create JSON</button>
		<button id="addNewProperty">Add New Property</button>
		<button id="cloneLastProperty">Clone Last Property</button>
	</div>

</body>

<script>
	var propertyList = [];

	var $currentNumber = 1;	//tracks the current number of items used when creating properties
	$('#overlay').toggle();

	$('#createCode').click(function(){
		propertyList = [];
		for(i=0; i<$currentNumber; i++){
			var tempArr = [
				$('#name'+(i+1)).val(),
				$('#label'+(i+1)).val(),
				$('#type'+(i+1)).val(),
				$('#fieldType'+(i+1)).val(),
				$('#groupName'+(i+1)).val(),
				$('#description'+(i+1)).val(),
				$('#options'+(i+1)).val(),
				$('#hasUniqueValue'+(i+1)).val(),
				$('#hidden'+(i+1)).val(),
				$('#formField'+(i+1)).val()
			];
			propertyList.push({"name":tempArr[0], "label":tempArr[1], "type":tempArr[2], "fieldType":tempArr[3], "groupName":tempArr[4], "description":tempArr[5], "options":tempArr[6], "hasUniqueValue":tempArr[7], "hidden":tempArr[8], "formField":tempArr[9]});
		}

		console.log(propertyList);

		$('#overlay').toggle();
		$('#overlayTextArea').empty();
		// var $textString = "[";
		// for(i=0; i<$currentNumber; i++){
		// 	if(i > 1) {$textString += `,`; }
		// 	$textString += `{"name":`+$('#name'+(i+1)).val()+`}`;
		// 	//$textString += `{"name":`+(name+i)+`,"label":${(label+i)},"type":${(type+i)},"fieldType":${(fieldType+i)},"description":${(description+i)},"formField":${(formField+i)}}`;
		// }
		// $textString += `]`;
		// $('#overlayTextArea').append($textString);
		sendPOSTreq(propertyList);
		$('#overlayTextArea').append(JSON.stringify(propertyList, null, "\t"));
	});

	$('#closeOverlay').click(function(){
		$('#overlay').toggle();
	});

	$('#addNewProperty').click(function(){
		$currentNumber++;
		$('#mainCanvas').append(`
		<div class="creationForm" id="CF${$currentNumber}">
			<input type="text" placeholder="Name" id="name${$currentNumber}"></input>
			<input type="text" placeholder="label" id="label${$currentNumber}"></input>
			<select name="type" id="type${$currentNumber}" ><option value="" selected="selected">Type</option><option value="number">number</option><option value="date">date</option><option value="datetime">datetime</option><option value="enumeration">enumeration</option></select>
			<select name="fieldType" id="fieldType${$currentNumber}" > <option value="" selected="selected">Field Type</option> <option value="textarea">textarea</option> <option value="text">text</option> <option value="date">date</option> <option value="file">file</option> <option value="number">number</option> <option value="select">select</option> <option value="radio">radio</option> <option value="checkbox">checkbox</option> <option value="booleancheckbox">booleancheckbox</option> </select>
			<input type="text" placeholder="groupName" id="groupName${$currentNumber}"></input>
			<input type="text" placeholder="description" id="description${$currentNumber}"></input>
			<input type="text" placeholder="options" id="options${$currentNumber}"></input>
			<select name="hasUniqueValue" id="hasUniqueValue${$currentNumber}" > <option value="" selected="selected">hasUniqueValue</option> <option value="Yes">Yes</option> <option value="No">No</option> </select>
			<select name="hidden" id="hidden${$currentNumber}" > <option value="" selected="selected">hidden</option> <option value="Yes">Yes</option> <option value="No">No</option> </select>
			<select name="formField" id="formField${$currentNumber}" > <option value="" selected="selected">Form Field</option> <option value="Yes">Yes</option> <option value="No">No</option> </select>
		</div>
		`);
	});
	$('#cloneLastProperty').click(function(data){
		var tempArr = [
				$('#name'+$currentNumber).val(),
				$('#label'+$currentNumber).val(),
				$('#type'+$currentNumber).val(),
				$('#fieldType'+$currentNumber).val(),
				$('#groupName'+$currentNumber).val(),
				$('#description'+$currentNumber).val(),
				$('#options'+$currentNumber).val(),
				$('#hasUniqueValue'+$currentNumber).val(),
				$('#hidden'+$currentNumber).val(),
				$('#formField'+$currentNumber).val()
			];
		$currentNumber++;
		$('#mainCanvas').append(`
		<div class="creationForm" id="CF${$currentNumber}">
			<input type="text" placeholder="Name" id="name${$currentNumber}"></input>
			<input type="text" placeholder="label" id="label${$currentNumber}" value="${tempArr[1]}"></input>
			<select name="type" id="type${$currentNumber}" value="${tempArr[2]}"><option value="" selected="selected">Type</option><option value="number">number</option><option value="date">date</option><option value="datetime">datetime</option><option value="enumeration">enumeration</option></select>
			<select name="fieldType" id="fieldType${$currentNumber}" > <option value="" selected="selected">Field Type</option> <option value="textarea">textarea</option> <option value="text">text</option> <option value="date">date</option> <option value="file">file</option> <option value="number">number</option> <option value="select">select</option> <option value="radio">radio</option> <option value="checkbox">checkbox</option> <option value="booleancheckbox">booleancheckbox</option> </select>
			<input type="text" placeholder="groupName" id="groupName${$currentNumber}"></input>
			<input type="text" placeholder="description" id="description${$currentNumber}"></input>
			<input type="text" placeholder="options" id="options${$currentNumber}"></input>
			<select name="hasUniqueValue" id="hasUniqueValue${$currentNumber}" > <option value="" selected="selected">hasUniqueValue</option> <option value="Yes">Yes</option> <option value="No">No</option> </select>
			<select name="hidden" id="hidden${$currentNumber}" > <option value="" selected="selected">hidden</option> <option value="Yes">Yes</option> <option value="No">No</option> </select>
			<select name="formField" id="formField${$currentNumber}" > <option value="" selected="selected">Form Field</option> <option value="Yes">Yes</option> <option value="No">No</option> </select>
		</div>
		`);
		//$('#type' + currentNumber).value = tempArr[2];
		const $select = document.querySelector('#type' + $currentNumber);
		$select.value = tempArr[2];
	});
	
	function sendPOSTreq(data){
		var $data = JSON.stringify(data);
		console.log("$data: " + $data);
	}

</script>
</html>
